<div class="container-self">
  <div class="header">
    <%= image_tag 'settingsoff.png', class: 'nav-icon-head' %>
    <p class="header-title">History</p>
    <%= image_tag 'deleteoff.png', class: 'nav-icon-head' %>
  </div>
  <% if user_signed_in? %>


  <div class="cards">
    <% @histories.each do |history| %>
      <div class="card-container col-lg-12">
        <%= image_tag history.song.cover_image_url, class: 'cover-image' %>
        <div class="card-container-infos">
          <h2><%= history.song.name %></h2>
          <p><%= history.song.artist %></p>
          <p><%= history.song.updated_at.strftime("%m-%e-%y %H:%M") %></p>
        </div>
        <form action="/songs" method="post">
          <input type="hidden" id="authenticity_token" name="authenticity_token" value="<%= form_authenticity_token %>">
          <input type="hidden" name="link" id="link" value="<% history.song.song_details[0].url %>">
          <%#= song.name %> <%#= song.artist %> <%#= song.song_details[1].url %>
          <button class="btn-blue">Share</button>
        </form>
      </div>
    <% end %>
  </div>
  <% else %>
  <p>Please log in to see your histories</p>
  <% end %>
</div>
<script>
  const header = document.querySelector('.header');
  let prevScrollPos = window.pageYOffset;

  window.addEventListener('scroll', () => {
    let currentScrollPos = window.pageYOffset;

    if (prevScrollPos < currentScrollPos) {
      header.classList.add('hide');
    } else {
      header.classList.remove('hide');
    }
    prevScrollPos = currentScrollPos;
  })
</script>

    <!-- <form action="/songs" method="post">
      <input type="hidden" id="authenticity_token" name="authenticity_token" value="<%= form_authenticity_token %>">
      <textarea name="link" id="link" placeholder="Please paste your link here"></textarea>

      <div class="disc-wave">
        <button value="Mixxt" type="submit" class="glow-on-hover" onclick="rotateAnimation('disc',1)" ></button>
      </div>
    </form> -->
